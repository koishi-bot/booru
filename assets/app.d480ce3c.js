import{r as m,g as ue,a3 as F,d as C,p as T,a9 as ve,aa as oe,t as h,B as M,J as p,X as Se,$ as $e,z as S,y as L,u as y,a5 as W,T as Ce,v as E,E as B,F as Z,w as Y,a4 as G,ab as de,o as ee,n as q,m as Ee,I as A,K as fe,C as te,M as ae,A as I,_ as se,a8 as Pe,x as pe,a7 as ke,q as ze,Q as Ne,k as Le,f as me,a1 as J,ac as Ae,ad as Be,ae as Te,af as Ve,ag as xe,ah as Re,ai as He,aj as Me,ak as Oe,al as De,am as Fe,e as We,an as Ie,ao as Ke,ap as Xe,O as je}from"./chunks/framework.dbf0e487.js";import{u as Q,i as Ye,a as Ue,b as Ge,c as he,V as qe,d as Je,e as Qe,f as Ze,g as et,h as tt,j as at,t as ne,k as st,l as ot,m as nt}from"./chunks/theme.c411049a.js";const _e=Symbol("scrollbarContextKey"),R=4,rt={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},lt=({move:t,size:e,bar:a})=>({[a.size]:e,transform:`translate${a.axis}(${t}%)`});function re(t,e="px"){if(!t)return"";if(typeof t=="number"||ct(t))return`${t}${e}`;if(typeof t=="string")return t}const ct=t=>typeof t!="string"?!1:!Number.isNaN(Number(t));class it extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function ut(t,e){throw new it(`[${t}] ${e}`)}const vt=Symbol(""),le=m();function dt(t,e=void 0){const a=ue()?F(vt,le):le;return t?C(()=>{var s;return((s=a.value)==null?void 0:s[t])??e}):a}const ft="el",pt="is-",x=(t,e,a,s,l)=>{let c=`${t}-${e}`;return a&&(c+=`-${a}`),s&&(c+=`__${s}`),l&&(c+=`--${l}`),c},be=t=>{const e=dt("namespace",ft);return{namespace:e,b:(o="")=>x(e.value,t,o,"",""),e:o=>o?x(e.value,t,"",o,""):"",m:o=>o?x(e.value,t,"","",o):"",be:(o,v)=>o&&v?x(e.value,t,o,v,""):"",em:(o,v)=>o&&v?x(e.value,t,"",o,v):"",bm:(o,v)=>o&&v?x(e.value,t,o,"",v):"",bem:(o,v,_)=>o&&v&&_?x(e.value,t,o,v,_):"",is:(o,...v)=>{const _=v.length>=1?v[0]:!0;return o&&_?`${pt}${o}`:""},cssVar:o=>{const v={};for(const _ in o)o[_]&&(v[`--${e.value}-${_}`]=o[_]);return v},cssVarName:o=>`--${e.value}-${o}`,cssVarBlock:o=>{const v={};for(const _ in o)o[_]&&(v[`--${e.value}-${t}-${_}`]=o[_]);return v},cssVarBlockName:o=>`--${e.value}-${t}-${o}`}},mt={vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean},ht="Thumb",ce=T({__name:"thumb",props:mt,setup(t){const e=t,a=F(_e),s=be("scrollbar");a||ut(ht,"can not inject scrollbar context");const l=m(),c=m(),r=m({}),d=m(!1);let f=!1,u=!1,z=Ye?document.onselectstart:null;const i=C(()=>rt[e.vertical?"vertical":"horizontal"]),$=C(()=>lt({size:e.size,move:e.move,bar:i.value})),P=C(()=>l.value[i.value.offset]**2/a.wrapElement[i.value.scrollSize]/e.ratio/c.value[i.value.offset]),o=b=>{var n;if(b.stopPropagation(),b.ctrlKey||[1,2].includes(b.button))return;(n=window.getSelection())==null||n.removeAllRanges(),_(b);const w=b.currentTarget;w&&(r.value[i.value.axis]=w[i.value.offset]-(b[i.value.client]-w.getBoundingClientRect()[i.value.direction]))},v=b=>{if(!c.value||!l.value||!a.wrapElement)return;const w=Math.abs(b.target.getBoundingClientRect()[i.value.direction]-b[i.value.client]),n=c.value[i.value.offset]/2,N=(w-n)*100*P.value/l.value[i.value.offset];a.wrapElement[i.value.scroll]=N*a.wrapElement[i.value.scrollSize]/100},_=b=>{b.stopImmediatePropagation(),f=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",k),z=document.onselectstart,document.onselectstart=()=>!1},g=b=>{if(!l.value||!c.value||f===!1)return;const w=r.value[i.value.axis];if(!w)return;const n=(l.value.getBoundingClientRect()[i.value.direction]-b[i.value.client])*-1,N=c.value[i.value.offset]-w,D=(n-N)*100*P.value/l.value[i.value.offset];a.wrapElement[i.value.scroll]=D*a.wrapElement[i.value.scrollSize]/100},k=()=>{f=!1,r.value[i.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",k),K(),u&&(d.value=!1)},O=()=>{u=!1,d.value=!!e.size},V=()=>{u=!0,d.value=f};ve(()=>{K(),document.removeEventListener("mouseup",k)});const K=()=>{document.onselectstart!==z&&(document.onselectstart=z)};return Q(oe(a,"scrollbarElement"),"mousemove",O),Q(oe(a,"scrollbarElement"),"mouseleave",V),(b,w)=>(h(),M(Ce,{name:y(s).b("fade")},{default:p(()=>[Se(S("div",{ref_key:"instance",ref:l,class:L([y(s).e("bar"),y(s).is(i.value.key)]),onMousedown:v},[S("div",{ref_key:"thumb",ref:c,class:L(y(s).e("thumb")),style:W($.value),onMousedown:o},null,38)],34),[[$e,b.always||d.value]])]),_:1},8,["name"]))}}),_t={always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}},bt=T({__name:"bar",props:_t,setup(t,{expose:e}){const a=t,s=m(0),l=m(0);return e({handleScroll:r=>{if(r){const d=r.offsetHeight-R,f=r.offsetWidth-R;l.value=r.scrollTop*100/d*a.ratioY,s.value=r.scrollLeft*100/f*a.ratioX}}}),(r,d)=>(h(),E(Z,null,[B(ce,{move:s.value,ratio:r.ratioX,size:r.width,always:r.always},null,8,["move","ratio","size","always"]),B(ce,{move:l.value,ratio:r.ratioY,size:r.height,vertical:"",always:r.always},null,8,["move","ratio","size","always"])],64))}}),yt={height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:[String,Object,Array],default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}},gt={scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every(a=>typeof a=="number")},wt={name:"ElScrollbar"},St=T({...wt,props:yt,emits:gt,setup(t,{expose:e,emit:a}){const s=t,l=a,c=be("scrollbar");let r,d;const f=m(),u=m(),z=m(),i=m("0"),$=m("0"),P=m(),o=m(1),v=m(1),_=C(()=>{const n={};return s.height&&(n.height=re(s.height)),s.maxHeight&&(n.maxHeight=re(s.maxHeight)),[s.wrapStyle,n]}),g=C(()=>[s.wrapClass,c.e("wrap"),{[c.em("wrap","hidden-default")]:!s.native}]),k=C(()=>[c.e("view"),s.viewClass]),O=()=>{var n;u.value&&((n=P.value)==null||n.handleScroll(u.value),l("scroll",{scrollTop:u.value.scrollTop,scrollLeft:u.value.scrollLeft}))};function V(n,N){Ue(n)?u.value.scrollTo(n):typeof n=="number"&&typeof N=="number"&&u.value.scrollTo(n,N)}const K=n=>{typeof n=="number"&&(u.value.scrollTop=n)},b=n=>{typeof n=="number"&&(u.value.scrollLeft=n)},w=()=>{if(!u.value)return;const n=u.value.offsetHeight-R,N=u.value.offsetWidth-R,D=n**2/u.value.scrollHeight,U=N**2/u.value.scrollWidth,X=Math.max(D,s.minSize),j=Math.max(U,s.minSize);o.value=D/(n-D)/(X/(n-X)),v.value=U/(N-U)/(j/(N-j)),$.value=X+R<n?`${X}px`:"",i.value=j+R<N?`${j}px`:""};return Y(()=>s.noresize,n=>{n?(r==null||r(),d==null||d()):({stop:r}=Ge(z,w),d=Q("resize",w))},{immediate:!0}),Y(()=>[s.maxHeight,s.height],()=>{s.native||q(()=>{var n;w(),u.value&&((n=P.value)==null||n.handleScroll(u.value))})}),G(_e,de({scrollbarElement:f,wrapElement:u})),ee(()=>{s.native||q(()=>{w()})}),Ee(()=>w()),e({wrapRef:u,update:w,scrollTo:V,setScrollTop:K,setScrollLeft:b,handleScroll:O}),(n,N)=>(h(),E("div",{ref_key:"scrollbarRef",ref:f,class:L(y(c).b())},[S("div",{ref_key:"wrapRef",ref:u,class:L(g.value),style:W(_.value),onScroll:O},[(h(),M(fe(n.tag),{ref_key:"resizeRef",ref:z,class:L(k.value),style:W(n.viewStyle)},{default:p(()=>[A(n.$slots,"default")]),_:3},8,["class","style"]))],38),n.native?te("",!0):(h(),M(bt,{key:0,ref_key:"barRef",ref:P,height:$.value,width:i.value,always:n.always,"ratio-x":v.value,"ratio-y":o.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});const $t=T({__name:"badge",props:{type:{type:String,default:"tip"},text:{type:String},vertical:{type:String}},setup(t){return(e,a)=>(h(),E("span",{class:L(["badge",t.type]),style:W({verticalAlign:t.vertical})},[A(e.$slots,"default",{},()=>[ae(I(t.text),1)],!0)],6))}});const Ct=se($t,[["__scopeId","data-v-7c00ca57"]]),Et=["src"],Pt={class:"nickname"},kt={class:"message-box"},zt=T({__name:"chat-message",props:{nickname:{},color:{},avatar:{}},setup(t,{expose:e}){const a={Alice:"#cc0066",Bob:"#00994d",Carol:"#1e90ff",Dave:"#f4a460"},s={Koishi:"https://koishi.chat/logo.png"},l=t,c=m(!1),r=m(!1),d=m(!1),f=m(),u=C(()=>l.color||a[l.nickname]),z=C(()=>l.avatar||s[l.nickname]);function i(){let g;for(const k of document.querySelectorAll(".chat-message")){if(k===f.value)return g;g=k}}Y(r,g=>{if(!g)return c.value=!1;const k=i();if(!k||k.getBoundingClientRect().bottom<0)return P();const V=k.__vue__.exposed;V.moving.value||!V.shown.value?V.onappear(P):P()});let $=()=>{};function P(){c.value=!0,d.value=!0,setTimeout(()=>{d.value=!1,$()},100)}function o(){f.value.getBoundingClientRect().top<innerHeight&&(r.value=!0)}const v=ue();return e({moving:d,shown:c,onappear(g){$=g}}),ee(()=>{f.value.__vue__=v,o(),addEventListener("scroll",o),addEventListener("resize",o)}),ve(()=>{removeEventListener("scroll",o),removeEventListener("resize",o)}),(g,k)=>(h(),E("div",{ref_key:"root",ref:f,class:L(["chat-message",{shown:c.value}])},[z.value?(h(),E("img",{key:0,class:"avatar",src:z.value},null,8,Et)):(h(),E("div",{key:1,class:"avatar",style:W({backgroundColor:u.value})},I(g.nickname[0]),5)),S("div",Pt,I(g.nickname),1),S("div",kt,[A(g.$slots,"default",{},()=>[ae("Â ")])])],2))}});const Nt={props:{controls:Boolean,title:String},data:()=>({tab:"default"}),computed:{mini(){return!this.controls&&!this.title}}};const Lt={class:"controls"},At=S("div",{class:"circle red"},null,-1),Bt=S("div",{class:"circle yellow"},null,-1),Tt=S("div",{class:"circle green"},null,-1),Vt={class:"title"},xt={key:0,class:"title-text"},Rt={class:"content"};function Ht(t,e,a,s,l,c){return h(),E("div",{class:L(["panel-view",{mini:c.mini}])},[S("div",Lt,[At,Bt,Tt,S("div",Vt,[a.title?(h(),E("span",xt,I(a.title),1)):te("",!0)])]),S("div",Rt,[A(t.$slots,"default")])],2)}const Mt=se(Nt,[["render",Ht]]),Ot={class:"tab-select"},Dt={class:"header"},Ft=["onClick"],Wt=T({__name:"tab-select",setup(t){const e=Pe(),a=C(()=>Object.keys(e).filter(l=>l.startsWith("tab-")).map(l=>l.slice(4))),s=Ut(a);return(l,c)=>(h(),E("div",Ot,[S("div",Dt,[(h(!0),E(Z,null,pe(a.value,r=>(h(),E("span",{key:r,class:L({active:y(s)===r}),onClick:d=>s.value=r},[A(l.$slots,"title-"+r,{},()=>[ae(I(r),1)])],10,Ft))),128))]),A(l.$slots,"tab-"+y(s))]))}});const It=S("div",{class:"curtain"},null,-1),Kt={class:"vp-sidebar-nav"},Xt=T({__name:"sidebar",props:{open:{type:Boolean}},setup(t){const{hasSidebar:e,sidebarGroups:a}=he(),s=t,l=m(null);return ke(async()=>{var c;s.open&&(await q(),(c=l.value)==null||c.wrapRef.focus())}),(c,r)=>{const d=ze("ElScrollbar");return y(e)?(h(),M(d,{key:0,tag:"aside",class:L(["VPSidebar",{open:c.open}]),"view-class":"vp-sidebar-view",ref_key:"navEl",ref:l,onClick:r[0]||(r[0]=Ne(()=>{},["stop"]))},{default:p(()=>[It,S("nav",Kt,[A(c.$slots,"sidebar-nav-before"),(h(!0),E(Z,null,pe(y(a),f=>(h(),E("div",{key:f.text,class:"group"},[B(qe,{item:f,depth:0},null,8,["item"])]))),128)),A(c.$slots,"sidebar-nav-after")])]),_:3},8,["class"])):te("",!0)}}});const jt=T({__name:"Layout",setup(t){const{isOpen:e,open:a,close:s,hasSidebar:l}=he(),c=Le();Y(()=>c.path,s),Je(e,s),G("close-sidebar",s),G("is-sidebar-open",e);const{frontmatter:r}=me(),d=F(ye),f=F("NotFound"),u=C(()=>{var $;return d.layouts[($=r.value.layout)==null?void 0:$.toLowerCase()]||d.layouts.default}),z=C(()=>({"has-sidebar":l.value})),i=C(()=>({[`layout-${r.value.layout}`]:r.value.layout}));return($,P)=>(h(),E("div",{class:L(["Layout",i.value])},[B(Qe),B(Ze,{class:"backdrop",show:y(e),onClick:y(s)},null,8,["show","onClick"]),B(et,null,{"nav-bar-title-before":p(()=>[]),"nav-bar-title-after":p(()=>[]),"nav-bar-content-before":p(()=>[]),"nav-bar-content-after":p(()=>[]),"nav-screen-content-before":p(()=>[]),"nav-screen-content-after":p(()=>[]),_:1}),B(tt,{open:y(e),onOpenMenu:y(a)},null,8,["open","onOpenMenu"]),B(Xt,{open:y(e)},{"sidebar-nav-before":p(()=>[A($.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":p(()=>[A($.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),S("div",{class:L(["VPContent",z.value]),id:"VPContent"},[y(c).component===y(f)?(h(),M(y(f),{key:0})):(h(),M(fe(u.value),{key:1},{"doc-footer-before":p(()=>[]),"doc-before":p(()=>[]),"doc-after":p(()=>[]),"aside-top":p(()=>[]),"aside-bottom":p(()=>[]),"aside-outline-before":p(()=>[]),"aside-outline-after":p(()=>[]),"aside-ads-before":p(()=>[]),"aside-ads-after":p(()=>[]),_:1}))],2),B(at)],2))}});const Yt=se(jt,[["__scopeId","data-v-c495affc"]]);const ye=Symbol.for("theme-config"),ge=Symbol.for("client-config");function Ut(t){const e=F(ge);return C({get:()=>{const a=nt(t);return e.tabs.find(s=>a.includes(s))||a[0]},set:a=>{const s=e.tabs.indexOf(a);s>=0&&e.tabs.splice(s,1),e.tabs.unshift(a)}})}const ie=1;function Gt(t){const e=st("koishi.docs.config",{});return e.value.version!==ie?e.value={...t,version:ie}:e.value={...t,...e.value},de(e.value)}const qt=(t={})=>({...ne,Layout:Yt,...t,enhanceApp(e){var s;e.app.component("ElScrollbar",St),e.app.component("Badge",Ct),e.app.component("ChatMessage",zt),e.app.component("ChatPanel",Mt),e.app.component("TabSelect",Wt);const a={default:ot};for(const l in t.layouts)a[l.toLowerCase()]=t.layouts[l];e.app.provide("NotFound",ne.NotFound),e.app.provide(ye,{layouts:a}),e.app.provide(ge,Gt({tabs:[]})),(s=t.enhanceApp)==null||s.call(t,e)}}),Jt=qt();function we(t){if(t.extends){const e=we(t.extends);return{...e,...t,async enhanceApp(a){e.enhanceApp&&await e.enhanceApp(a),t.enhanceApp&&await t.enhanceApp(a)}}}return t}const H=we(Jt),Qt=T({name:"VitePressApp",setup(){const{site:t}=me();return ee(()=>{We(()=>{document.documentElement.lang=t.value.lang,document.documentElement.dir=t.value.dir})}),Ie(),Ke(),Xe(),H.setup&&H.setup(),()=>je(H.Layout)}});async function Zt(){const t=ta(),e=ea();e.provide(Be,t);const a=Te(t.route);return e.provide(Ve,a),e.component("Content",xe),e.component("ClientOnly",Re),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get(){return a.frontmatter.value}},$params:{get(){return a.page.value.params}}}),H.enhanceApp&&await H.enhanceApp({app:e,router:t,siteData:He}),{app:e,router:t,data:a}}function ea(){return Me(Qt)}function ta(){let t=J,e;return Oe(a=>{let s=De(a);return t&&(e=s),(t||e===s)&&(s=s.replace(/\.js$/,".lean.js")),J&&(t=!1),Fe(()=>import(s),[])},H.NotFound)}J&&Zt().then(({app:t,router:e,data:a})=>{e.go().then(()=>{Ae(e.route,a.site),t.mount("#app")})});export{Zt as createApp};
